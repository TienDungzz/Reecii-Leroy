{%- capture sizes -%}
    (min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 130 | divided_by: 4 }}px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)
{%- endcapture -%}

{%- liquid
    assign f_media = card_product.featured_media
    assign media = card_product.media

    assign sizes = sizes

    assign f_widths = '165, 360, 533, 720, 940, 1066'
    assign m_widths = '165, 360, 533, 720, 940, 1066'

    unless lazy_load == false
        assign loading = "lazy"
    endunless
-%}

<div class="card__media{% if image_shape and image_shape != 'default' %} shape--{{ image_shape }} color-{{ settings.card_color_scheme }} gradient{% endif %}">
    <div class="media media--transparent media--hover-effect">
        {{ f_media | image_url: width: f_media.width | image_tag: sizes: sizes , widths: f_widths, loading: 'lazy', alt: f_media.alt, class: 'motion-reduce', loading: loading, width: f_media.width, height: f_media.height}}
        {%- if media[1] != null and show_secondary_image -%}
            {{ media[1] | image_url: width: media[1].width | image_tag: sizes: sizes, widths: m_widths, loading: 'lazy', alt: media.alt, class: 'motion-reduce', loading: 'lazy', width: media[1].width, height: media[1].height}}
        {%- endif -%}
    </div>
    <a href="{{ card_product.url }}" class="full-unstyled-link link-wrap z-index-2" aria-labelledby="MediaStandardCardNoMediaLink-{{ section_id }}-{{ card_product.id }}" id="MediaStandardCardNoMediaLink-{{ section_id }}-{{ card_product.id }}">
        <span class="visually-hidden">{{ card_product.title | escape }}</span>
    </a>
</div>