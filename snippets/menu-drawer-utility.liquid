<div
  class="menu-drawer__utility-links"
  style="--menu-drawer-animation-index: {{ listmenu_size | plus: 1 }};"
>
  {% liquid
    assign show_language = settings.show_language
    if localization.available_languages.size <= 1
      assign show_language = false
    endif

    assign show_country = settings.show_country
    if localization.available_countries.size <= 1
      assign show_country = false
    endif

    assign country_style = settings.country_selector_style
  %}

  {%- if show_language or show_country -%}
    <div class="{% if class_animated != blank %} {{ class_animated }}{% endif %}">
      <h3 class="menu-drawer__utility-heading h6" id="HeaderLanguageLabel">
        {%- if show_language and show_country -%}
          {{ 'content.localization_region_and_language' | t }}
        {%- elsif show_language and show_country == false -%}
          {{ 'content.language' | t }}
        {%- elsif show_language == false and show_country -%}
            {{ 'content.country_label' | t }}
        {%- endif -%}
      </h3>
      {%- render 'language-country-localization',
        localPosition: 'HeaderLanguage',
        country_style: country_style,
        show_language: show_language,
        show_country: show_country,
        icon_globe: icon_globe,
        show_back_button: true,
        element: 'drawer'
      -%}
    </div>
  {%- endif -%}
</div>

{% stylesheet %}
  .menu-drawer__utility-links {
    .disclosure__list.country-selector__list,
    .disclosure__list.language-selector__list {
      padding-block-end: var(--padding-sm);
    }

    .disclosure__list-wrapper {
      position: fixed;
      width: 100%;
      top: 0;
      height: 100dvh;
      left: 0;
      background-color: var(--color-background);
      max-height: initial;
      display: grid;
      grid-template-rows: 4.5rem 1fr 5rem;
    }

    localization-form:has(.country-selector__list--with-multiple-currencies) {
      width: 100%;
      max-height: calc(100dvh - 9.5rem);
      display: block;

      .country-selector__list--with-multiple-currencies {
        width: 100%;
        max-height: calc(100dvh - 16.5rem);
      }
    }

    .language-selector--only .details--dropdown-language {
      width: 100%;
    }
  }
{% endstylesheet %}
