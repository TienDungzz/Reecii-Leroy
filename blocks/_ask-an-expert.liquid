{% liquid
  assign block_settings = block.settings
  assign form_id = block.id | default: section.id | prepend: 'ContactForm-'
  assign button_style = block_settings.button_style
  assign button_label = block_settings.button_label
  assign notification_message = block.settings.notification_message
  capture text_block_classes
    if block_settings.type_preset == 'custom'
      echo ' custom-typography '
      if block_settings.font_size != ''
        echo ' custom-font-size '
      endif
      if block_settings.color != ''
        echo ' custom-color '
      endif
    endif
  endcapture
%}
<side-drawer-opener
  class="popup ask-an-expert product-popup-modal__opener--keep"
  {{ block.shopify_attributes }}
  data-side-drawer="#PopupModal-{{ block.id }}"
>
  <button
    id="PopupModalButton-{{ block.id }}"
    class="button button-unstyled popup__button text-left spacing-style {{ block_settings.type_preset }} {{ text_block_classes }}"
    type="button"
    style="
      {% render 'spacing-style', settings: block_settings %}
      {% render 'typography-style', settings: block_settings %}
    "
  >
    {{- 'icon-mail.svg' | inline_asset_content -}}
    {{- block_settings.heading }}
  </button>
</side-drawer-opener>
<side-drawer
  class="popup__content product-popup-modal__drawer--keep drawer fixed top-0 left-0 z-10 w-screen h-full flex justify-center no-js-hidden"
  element-s-popup
  id="PopupModal-{{ block.id }}"
>
  <div id="Drawer-Overlay-{{ block.id }}" class="drawer__overlay fixed inset-0 cursor-pointer"></div>
  <div
    class="popup__inner color-{{ block_settings.popover_color_scheme }} w-full h-auto absolute-c-c flex flex-column global-settings-popup"
    role="dialog"
    aria-modal="true"
    aria-label="Ask an expert"
    tabindex="-1"
    style="--modal-max-width: 72rem;"
  >
    <button
      onclick="this.closest('side-drawer').close()"
      class="drawer__close block t-button bor-none rounded-full cursor-pointer absolute"
      type="button"
      aria-label="{{ 'accessibility.close_dialog' | t }}"
      style="--top: 0.5rem; --right: 0.5rem;"
    >
      {{- 'icon-close.svg' | inline_asset_content -}}
    </button>
    <div class="ask-an-expert__content">
      {% content_for 'block', type: 'text', id: 'heading' %}
      {% content_for 'block', type: '_divider', id: 'divider' %}
      {% content_for 'block', type: 'text', id: 'title' %}
      {% content_for 'block', type: 'text', id: 'description' %}
      {% content_for 'block', type: '_divider', id: 'divider-2' %}
      {% content_for 'block', type: 'text', id: 'text' %}
      <contact-form id="{{ form_id }}">
        {%- form 'contact', id: form_id, class: 'ask-an-expert__form' -%}
          <textarea rows="1" name="contact[product-title]" class="hidden">
            {{ product.title }}
          </textarea>
          <textarea rows="1" name="contact[product-variant]" class="hidden">
            {{ product.title }}
          </textarea>
          <textarea rows="1" name="contact[product-url]" class="hidden">
            {{ request.origin }}{{ product.url }}
          </textarea>
          <textarea rows="1" name="contact[message]" class="hidden">
            {{ notification_message }}
          </textarea>
          {% content_for 'blocks' %}
          <button class="button{% if button_style == 'outline' %}-secondary{% endif %} whitespace-nowrap" type="submit">{{ button_label }}</button>
        {%- endform -%}
      </contact-form>
    </div>
  </div>
</side-drawer>
{% stylesheet %}
  .popup.ask-an-expert > .button {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
  }
  .popup.ask-an-expert > .button svg {
    top: 0;
  }
  .ask-an-expert__content {
    padding: 0 1.5rem;
    width: 100%;
    max-width: 54.5rem;
    margin: 0 auto;
  }
  .ask-an-expert__form .button[type="submit"] {
    display: flex;
    justify-content: center;
    margin: 0 auto 2rem;
  }
{% endstylesheet %}
{% schema %}
{
  "name": "t:names.ask_an_expert",
  "tag": null,
  "blocks": [
    {
      "type": "_input"
    },
    {
      "type": "_textarea"
    },
    {
      "type": "_radio"
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:settings.text",
      "default": "Ask an expert"
    },
    {
      "type": "select",
      "id": "type_preset",
      "label": "t:settings.preset",
      "options": [
        {
          "value": "",
          "label": "t:options.default"
        },
        {
          "value": "paragraph",
          "label": "t:options.paragraph"
        },
        {
          "value": "h1",
          "label": "t:options.h1"
        },
        {
          "value": "h2",
          "label": "t:options.h2"
        },
        {
          "value": "h3",
          "label": "t:options.h3"
        },
        {
          "value": "h4",
          "label": "t:options.h4"
        },
        {
          "value": "h5",
          "label": "t:options.h5"
        },
        {
          "value": "h6",
          "label": "t:options.h6"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "",
      "info": "t:info.edit_presets_in_theme_settings"
    },
    {
      "type": "select",
      "id": "font",
      "label": "t:settings.font",
      "options": [
        {
          "value": "var(--font-body--family)",
          "label": "t:options.body"
        },
        {
          "value": "var(--font-subheading--family)",
          "label": "t:options.subheading"
        },
        {
          "value": "var(--font-heading--family)",
          "label": "t:options.heading"
        }
      ],
      "default": "var(--font-body--family)",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "font_size",
      "label": "t:settings.size",
      "options": [
        {
          "value": "",
          "label": "t:options.default"
        },
        {
          "value": "1.0rem",
          "label": "10px"
        },
        {
          "value": "1.2rem",
          "label": "12px"
        },
        {
          "value": "1.4rem",
          "label": "14px"
        },
        {
          "value": "1.6rem",
          "label": "16px"
        },
        {
          "value": "1.8rem",
          "label": "18px"
        },
        {
          "value": "2.0rem",
          "label": "20px"
        },
        {
          "value": "2.2rem",
          "label": "22px"
        },
        {
          "value": "2.4rem",
          "label": "24px"
        },
        {
          "value": "2.6rem",
          "label": "26px"
        },
        {
          "value": "2.8rem",
          "label": "28px"
        },
        {
          "value": "3.0rem",
          "label": "30px"
        },
        {
          "value": "3.2rem",
          "label": "32px"
        },
        {
          "value": "3.4rem",
          "label": "34px"
        },
        {
          "value": "3.6rem",
          "label": "36px"
        },
        {
          "value": "4.0rem",
          "label": "40px"
        },
        {
          "value": "5.0rem",
          "label": "50px"
        },
        {
          "value": "6.0rem",
          "label": "60px"
        },
        {
          "value": "7.0rem",
          "label": "70px"
        },
        {
          "value": "8.0rem",
          "label": "80px"
        },
        {
          "value": "9.0rem",
          "label": "90px"
        },
        {
          "value": "10.0rem",
          "label": "100px"
        },
        {
          "value": "12.0rem",
          "label": "120px"
        }
      ],
      "default": "1.6rem",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "line_height",
      "label": "t:settings.line_height",
      "options": [
        {
          "value": "tight",
          "label": "t:options.tight"
        },
        {
          "value": "normal",
          "label": "t:options.normal"
        },
        {
          "value": "loose",
          "label": "t:options.loose"
        }
      ],
      "default": "normal",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "letter_spacing",
      "label": "t:settings.letter_spacing",
      "options": [
        {
          "value": "tight",
          "label": "t:options.tight"
        },
        {
          "value": "normal",
          "label": "t:options.normal"
        },
        {
          "value": "loose",
          "label": "t:options.loose"
        }
      ],
      "default": "normal",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "case",
      "label": "t:settings.case",
      "options": [
        {
          "value": "none",
          "label": "t:options.default"
        },
        {
          "value": "uppercase",
          "label": "t:options.uppercase"
        },
        {
          "value": "capitalize",
          "label": "t:options.capitalize"
        }
      ],
      "default": "none",
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "wrap",
      "label": "t:settings.wrap",
      "options": [
        {
          "value": "pretty",
          "label": "t:options.pretty"
        },
        {
          "value": "balance",
          "label": "t:options.balance"
        },
        {
          "value": "nowrap",
          "label": "t:options.none"
        }
      ],
      "visible_if": "{{ block.settings.type_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "color",
      "label": "t:settings.color",
      "options": [
        {
          "value": "var(--color-foreground)",
          "label": "t:options.text"
        },
        {
          "value": "var(--color-foreground-heading)",
          "label": "t:options.heading"
        },
        {
          "value": "var(--color-primary)",
          "label": "t:options.link"
        }
      ],
      "default": "var(--color-foreground)",
      "visible_if": "{{ block.settings.type_preset != 'rte' }}"
    },
    {
      "type": "header",
      "content": "t:content.submit_button"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "t:settings.button_label",
      "default": "Send question"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "t:settings.type",
      "options": [
        {
          "value": "default",
          "label": "t:options.default"
        },
        {
          "value": "outline",
          "label": "t:options.outline"
        }
      ],
      "default": "default"
    },
    {
      "type": "header",
      "content": "t:content.message"
    },
    {
      "type": "text",
      "id": "notification_message",
      "label": "t:settings.notification_message",
      "default": "Hey expert, need your take on this!",
      "info": "t:info.notification_message_info"
    }
  ],
  "presets": [
    {
      "name": "t:names.ask_an_expert"
    }
  ]
}
{% endschema %}