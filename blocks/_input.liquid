{% liquid
    assign pl = block.settings.padding_left
    assign pr = block.settings.padding_right
    assign pt = block.settings.padding_top
    assign pb = block.settings.padding_bottom

    assign label = block.settings.label
    assign label_name = label | handleize
    assign show_label = block.settings.show_label
    assign border_style = block.settings.border_style
    assign input_type = block.settings.input_type
    assign is_required = block.settings.is_required
    assign placeholder = block.settings.placeholder
    assign label_mb = block.settings.label_mb
    assign text_area_height = block.settings.text_area_height
    assign input_border_width = block.settings.input_border_width
    assign input_border_radius = block.settings.input_border_radius
    assign input_type_preset = block.settings.input_type_preset
    assign input_alignment = block.settings.input_alignment
%}

{%- capture attr -%}
class="border-style--{{ border_style }} w-full block{% if input_type == 'textarea' %} contact-form-textarea{% else %} contact-form-input{% endif %} {{ input_type_preset }} {{ input_alignment }}" {{ block.shopify_attributes }}
style="
{% if pl != 0 %}--pl:{{ pl }}px;{% endif %}
{% if pt != 0 %}--pt:{{ pt }}px;{% endif %}
{% if pb != 0 %}--pb:{{ pb }}px;{% endif %}
{% if pr != 0 %}--pr:{{ pr }}px;{% endif %}
{% if input_border_width != 0 %}--border-width: {{ input_border_width }}px;{% endif %}
{% if input_border_radius != 0 %}--border-radius: {{ input_border_radius }}px;{% endif %}
{% if input_type == 'textarea' %}--textarea-height: {{ text_area_height }}px;{% endif %}
"
{%- endcapture -%}

{% stylesheet %}
  .contact-form-textarea {
    height: var(--textarea-height);
  }

  .contact-form-input,
  .contact-form-textarea {
    border-radius: var(--border-radius);
  }

  .border-style--all {
    border: var(--border-width) solid var(--color-input-border);
  }

  .border-style--underline {
    border: none;
    border-radius: 0;
    border-bottom: var(--border-width) solid var(--color-input-border);
  }

  .border-style--none {
    border: none;
  }

  @media screen and (max-width: 1024px) {
    .form-textarea {
      height: calc(var(--textarea-height) * 0.75);
    }
  }

  @media screen and (max-width: 749px) {
    .form-textarea {
      height: calc(var(--textarea-height) * 0.5);
    }
  }
{% endstylesheet %}

{% if label != blank %}
  {%- if show_label -%}
    <label for="{{ block.id }}" style="--mb:{{ label_mb }}px;" class="block">{{ label }}</label>
  {%- endif -%}
  {% if input_type == 'textarea' %}
    <textarea name="contact[{{ label_name }}]" placeholder="{{ placeholder }}"{% if is_required %} required{% endif %} {{ attr }}></textarea>
  {% else %}
    <input type="{{ input_type }}" name="contact[{{ label_name }}]" placeholder="{{ placeholder }}"{% if is_required %} required{% endif %} {{ attr }}>
  {% endif %}
{% endif %}

{% schema %}
{
  "name": "Input",
  "settings": [
    {
      "type": "text",
      "id": "label",
      "label": "Label"
    },
    {
      "type": "checkbox",
      "id": "show_label",
      "label": "Show label",
      "default": true
    },
    {
      "type": "range",
      "id": "label_mb",
      "label": "Label margin bottom",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "select",
      "id": "input_type",
      "label": "Input type",
      "options": [
        {
          "value": "text",
          "label": "t:options.text"
        },
        {
          "value": "email",
          "label": "Email"
        },
        {
          "value": "textarea",
          "label": "Textarea"
        }
      ],
      "default": "text"
    },
    {
      "type": "range",
      "id": "text_area_height",
      "label": "Textarea height",
      "min": 100,
      "max": 500,
      "step": 10,
      "unit": "px",
      "default": 220,
      "visible_if": "{{ block.settings.input_type == 'textarea' }}"
    },
    {
      "type": "select",
      "id": "input_type_preset",
      "label": "t:settings.type_preset",
      "options": [
        {
          "value": "",
          "label": "t:options.default"
        },
        {
          "value": "paragraph",
          "label": "t:options.paragraph"
        },
        {
          "value": "h1",
          "label": "t:options.h1"
        },
        {
          "value": "h2",
          "label": "t:options.h2"
        },
        {
          "value": "h3",
          "label": "t:options.h3"
        },
        {
          "value": "h4",
          "label": "t:options.h4"
        },
        {
          "value": "h5",
          "label": "t:options.h5"
        },
        {
          "value": "h6",
          "label": "t:options.h6"
        }
      ],
      "default": "paragraph",
      "info": "t:info.edit_presets_in_theme_settings"
    },
    {
      "type": "checkbox",
      "id": "is_required",
      "label": "Is required",
      "default": false
    },
    {
      "type": "text",
      "id": "placeholder",
      "label": "Placeholder",
      "default": "Please fill in this field"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding_left",
      "label": "t:settings.padding_left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 15
    },
    {
      "type": "range",
      "id": "padding_right",
      "label": "t:settings.padding_right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 15
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:settings.padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:settings.padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "select",
      "id": "border_style",
      "label": "t:settings.border",
      "options": [
        {
          "value": "all",
          "label": "t:options.all"
        },
        {
          "value": "underline",
          "label": "t:options.underline"
        },
        {
          "value": "none",
          "label": "t:options.none"
        }
      ],
      "default": "all"
    },
    {
      "type": "range",
      "id": "input_border_width",
      "label": "t:settings.border_width",
      "min": 0,
      "max": 4,
      "step": 0.5,
      "unit": "px",
      "default": 1,
      "visible_if": "{{ block.settings.border_style != 'none' }}"
    },
    {
      "type": "range",
      "id": "input_border_radius",
      "label": "t:settings.border_radius",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0,
      "visible_if": "{{ block.settings.border_style != 'underline' }}"
    },
    {
      "type": "select",
      "id": "input_alignment",
      "label": "t:settings.alignment",
      "options": [
        {
          "value": "left",
          "label": "t:options.left"
        },
        {
          "value": "center",
          "label": "t:options.center"
        },
        {
          "value": "right",
          "label": "t:options.right"
        }
      ],
      "default": "left"
    }
  ],
  "presets": [
    {
      "name": "Input"
    }
  ]
}
{% endschema %}