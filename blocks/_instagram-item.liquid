{% liquid
  assign ratio = 1
  assign image = block.settings.background_image

  case block.settings.image_ratio
    when 'landscape'
      assign ratio = '16 / 9'
    when 'portrait'
      assign ratio = '4 / 5'
    when 'adapt'
      assign ratio = image.aspect_ratio
  endcase

  if ratio == 0 or ratio == null
    assign ratio = 1
  endif

  assign image_height = image.height
  assign image_width = image.width

  assign video_classes = 'video-block video-block--' | append: block.settings.video_position
  assign background_media = block.settings.background_media
  assign background_video = block.settings.video
  assign background_image_position = block.settings.background_image_position
%}

{% capture class %}
  image-block image-block--{{ block.id }} image-block--height-{{ block.settings.height }} spacing-style size-style border-style{% if block.settings.hover_zoomIn == true %} image-zoomIn{% endif %}{% if block.settings.hide_on_mobile %} max-sm:hidden{% endif %}
{% endcapture %}

{% capture style %}
  --ratio: {{ ratio }};
  {% render 'size-style', settings: block.settings %}
  {% render 'spacing-style', settings: block.settings %}
  {% render 'border-override', settings: block.settings %}
{% endcapture %}

{% liquid
  assign media_width_desktop = '100vw'
  assign media_width_mobile = '100vw'
  assign sizes = 'auto, (min-width: 750px) ' | append: media_width_desktop | append: ', ' | append: media_width_mobile
  assign widths = '300, 450, 600, 750, 900, 1050, 1200, 1350, 1500, 1650, 1800, 1950, 2000, 2500, 3000, 3500, 4000, 5000'

  assign element = 'div'
  if block.settings.enable_fancybox
    assign element = 'a'
  elsif block.settings.enable_parallax
    assign element = 'parallax-image'
  endif
%}

{%- if block.settings.enable_fancybox -%}
  {%- render 'fancybox_lib' -%}
{%- endif -%}

{% capture class_img %}
  image-block__image {% if block.settings.enable_parallax %} image-parallax--target{% endif %}
{% endcapture %}

{% capture attributes_fancybox %}
  href="{{ image | image_url: width: 1200 }}"
  data-fancybox="{{ section.id }}-instagram-gallery"
  data-caption="{{ image.alt | default: 'Instagram Image' }}"
  data-fancybox-width="{{ image_width | default: 1200 }}"
  data-fancybox-height="{{ image_height | default: 800 }}"
{% endcapture %}

{% capture attributes_fancybox_video %}
  href="{{ background_video.sources.first.url }}"
  data-fancybox="{{ section.id }}-instagram-gallery"
  data-type="video"
  data-caption="{{ background_video.alt | default: 'Instagram Video' }}"
{% endcapture %}

{% capture attributes_parllax %}
  data-parallax="true"
  data-speed="{{ block.settings.parallax_speed }}"
{% endcapture %}

{% capture attributes %}
  {{ block.shopify_attributes }}
  {% if block.settings.enable_fancybox %}
    {% if background_media == 'image' and image != blank %}
      {{ attributes_fancybox }}
    {% elsif background_media == 'video' and background_video != blank %}
      {{ attributes_fancybox_video }}
    {% endif %}
  {% endif %}
  {% if block.settings.enable_parallax %}
    {{ attributes_parllax }}
  {% endif %}
{% endcapture %}

{% capture icon %}
  {% render 'icon-or-image',
    icon: block.settings.icon,
    icon_custom: block.settings.icon_custom,
    svg_upload: block.settings.svg_upload,
    image_upload: block.settings.image_upload,
    width: block.settings.icon_width,
    attributes: block.shopify_attributes
  %}
{% endcapture %}

<div
  class="instagram-item relative {% if background_media == 'background_color' %} instagram-item--bg-color{% endif %}" 
  {% if background_video != blank %}
    data-video-enabled="true"
  {% endif %}
  {% if block.settings.enable_typing_content %} 
    data-typing-content="true"
  {% endif %} 
  style="
    --icon-button-bg-color: {{ block.settings.icon_button_bg_color }}; 
    --icon-button-color: {{ block.settings.icon_button_color }}; 
    --icon-button-size: {{ block.settings.icon_button_size }}px; 
    --icon-button-position-right: {{ block.settings.icon_button_position_right }}px; 
    --icon-button-position-bottom: {{ block.settings.icon_button_position_bottom }}px; 
    --icon-button-position-left: {{ block.settings.icon_button_position_left }}px; 
    --background-color: {{ block.settings.background_color }}; --ratioBg: {{ ratio }}
  "
>
  <div class="instagram-item__image overflow-hidden relative">
    <{{ element }}
      class="{{ class }}"
      style="{{ style }}"
      {{ attributes }}
    >
      {% if background_media == 'image' %}
        {%- if image != blank -%}
          {%- render 'image',
            image: image,
            class: class_img,
            height: image.height,
            sizes: sizes,
            widths: widths
          -%}
        {%- else -%}
          {{ 'hero-apparel-1' | placeholder_svg_tag: 'image-block__image placeholder-svg' }}
        {%- endif -%}

        {% if block.settings.hover_plus_icon == true %}
          <span class="icon_plus"></span>
        {% endif %}

        {% if block.settings.enable_fancybox %}
          {% if block.settings.icon_link != blank and block.settings.icon != 'none' %}
            <a href="{{ block.settings.icon_link }}" class="text-inherit"
              {% if block.settings.icon_open_in_new_tab %}
                target="_blank" rel="noopener"
              {% endif %}
            >
              <span class="icon_media icon_media--circle{% if block.settings.icon_button_position == 'left' %} position-left{% endif %}">
                <div class="svg-wrapper">
                  {{ icon }}
                </div>
              </span>
            </a>
          {% else %}
            {% if block.settings.icon != 'none' %}
              <span class="icon_media icon_media--circle{% if block.settings.icon_button_position == 'left' %} position-left{% endif %}">
                <div class="svg-wrapper">
                  {{ icon }}
                </div>
              </span>
            {% endif %}
          {% endif %}
        {% endif %}
      {% else %}
        {%- if background_video != blank -%}
          {% if block.settings.enable_fancybox %}
            <a href="{{ background_video.sources.first.url }}" data-type="video" data-caption="{{ background_video.alt | default: 'Instagram Video' }}" {{ attributes }}>
          {% endif %}
          <video-background-component
            class="{{ video_classes }}"
            style="{% if ratio %}--ratio: {{ ratio }};{% endif %}"
          >
            <video
              playsinline
              muted
              loop
              class="video-block"
            >
              {%- for sourceElement in background_video.sources -%}
                <source
                  data-video-source="{{ sourceElement.url }}"
                  type="{{ sourceElement.mime_type }}"
                  data-video
                >
              {%- endfor -%}
            </video>

            <span class="icon_media">
              <div class="svg-wrapper">
                {{ icon }}
              </div>
            </span>

          </video-background-component>
          {% if block.settings.enable_fancybox %}
            </a>
          {% endif %}
        {%- else -%}
          <div class="{{ video_classes }}" style="{% if ratio %}--ratio: {{ ratio }};{% endif %}">
            {%- assign placeholder_name = placeholder | default: 'hero-apparel-2' -%}
            {%- if placeholder_name == blank -%}
              {%- assign placeholder_name = 'hero-apparel-2' -%}
            {%- endif -%}
            {{ placeholder_name | placeholder_svg_tag }}
          </div>
        {%- endif -%}
      {% endif %}
    </{{ element }}>
  </div>
  {% if block.settings.center_button == true %}
    <div class="absolute-c-c hover-content-block">
      {% render 'button', link: block.settings.center_button_link, label: block.settings.center_button_text %}
    </div>
  {% endif %}
  {% if block.settings.toggle_overlay %}
    <div class="hover-content-block">
      {% render 'overlay', settings: block.settings, layer: '0' %}
    </div>
  {% endif %}
  <div class="instagram-item__content">
    {%- content_for 'blocks' -%}
  </div>
</div>

{% if image != blank and block.settings.icon_link != blank %}
  <script>
    (function(){
      const iconMedia = document.querySelector('.instagram-item__image .icon_media');

      iconMedia.addEventListener('click', function(e) {
        e.stopPropagation();
      });
    })();
  </script>
{% endif %}

{% if block.settings.enable_typing_content %}
  <script>
    (function(){
      // Add CSS for cursor blinking animation
      if (!document.querySelector('#typing-cursor-styles')) {
        const style = document.createElement('style');
        style.id = 'typing-cursor-styles';
        style.textContent = `
          @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
          }
          .typing-cursor {
            color: inherit;
            font-weight: bold;
          }
          .typing-complete {
            /* Add any completion styles here */
          }
        `;
        document.head.appendChild(style);
      }

      // Intersection Observer for triggering typing effect
      const observerOptions = {
        threshold: 0.3, // Trigger when 30% of the element is visible
        rootMargin: '0px 0px -50px 0px' // Trigger slightly before element comes into view
      };

      const typingObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const item = entry.target;
            if (item.hasAttribute('data-typing-content') && !item.classList.contains('typing-active')) {
              startTypingEffect(item);
            }
          }
        });
      }, observerOptions);

      // Function to start typing effect
      function startTypingEffect(item) {
        item.classList.add('typing-active');
        const content = item.querySelector('.instagram-item__content');
        const textBlocks = content.querySelectorAll('.text-block');

        // Collect all text elements in order for sequential typing
        const allTextElements = [];
        textBlocks.forEach((textBlock, blockIndex) => {
          const allTexts = textBlock.querySelectorAll('p');
          allTexts.forEach((textElement, textIndex) => {
            allTextElements.push({
              element: textElement,
              blockIndex: blockIndex,
              textIndex: textIndex
            });
          });
        });

        // Store original text content for infinite loop
        const originalTexts = allTextElements.map(textData => textData.element.textContent);

        // Hide all text elements before starting typing
        allTextElements.forEach((textData) => {
          textData.element.style.opacity = '0';
          textData.element.style.visibility = 'hidden';
        });

        // Type text sequentially from first to last
        let currentTextIndex = 0;

        function typeNextText() {
          if (currentTextIndex >= allTextElements.length) {
            // All text has been typed, start reverse typing effect
            setTimeout(() => {
              reverseTypeAllTexts();
            }, 2000); // 2 second pause before starting reverse effect
            return;
          }

          const textData = allTextElements[currentTextIndex];
          const textElement = textData.element;
          const originalText = originalTexts[currentTextIndex];

          // Show the text element and clear the text, then add cursor
          textElement.style.opacity = '1';
          textElement.style.visibility = 'visible';
          textElement.textContent = '';
          const cursor = document.createElement('span');
          cursor.className = 'typing-cursor';
          cursor.textContent = '_';
          cursor.style.animation = 'blink 1s infinite';
          textElement.appendChild(cursor);

          // Type the text character by character
          let charIndex = 0;
          const typeInterval = setInterval(() => {
            if (charIndex < originalText.length) {
              const charSpan = document.createElement('span');
              charSpan.textContent = originalText[charIndex];
              textElement.insertBefore(charSpan, cursor);
              charIndex++;
            } else {
              clearInterval(typeInterval);
              // Remove cursor after typing is complete
              setTimeout(() => {
                cursor.remove();
                // Move to next text after a short delay
                setTimeout(() => {
                  currentTextIndex++;
                  typeNextText();
                }, 500);
              }, 300);
            }
          }, 80); // Faster typing speed
        }

        function reverseTypeAllTexts() {
          // Start reverse typing from the last text element
          let currentReverseIndex = allTextElements.length - 1;

          function reverseTypeNextText() {
            if (currentReverseIndex < 0) {
              // All text has been reversed, start over
              setTimeout(() => {
                currentTextIndex = 0;
                typeNextText();
              }, 1000); // 1 second pause before restarting
              return;
            }

            const textData = allTextElements[currentReverseIndex];
            const textElement = textData.element;
            const currentText = textElement.textContent;

            if (currentText.length === 0) {
              // Text is already empty, move to previous
              currentReverseIndex--;
              reverseTypeNextText();
              return;
            }

            // Remove last character
            textElement.textContent = currentText.slice(0, -1);

            // If text is now empty, hide the element
            if (textElement.textContent.length === 0) {
              textElement.style.opacity = '0';
              textElement.style.visibility = 'hidden';
            }

            // Continue removing characters
            setTimeout(() => {
              reverseTypeNextText();
            }, 50); // Faster reverse typing speed
          }

          // Start reverse typing
          reverseTypeNextText();
        }

        function clearAllTexts() {
          // Clear all text elements completely
          allTextElements.forEach((textData) => {
            textData.element.textContent = '';
          });
        }

        function resetTexts() {
          // Reset all text elements to their original state and hide them
          allTextElements.forEach((textData, index) => {
            textData.element.textContent = originalTexts[index];
            textData.element.style.opacity = '0';
            textData.element.style.visibility = 'hidden';
          });
        }

        // Start the infinite typing loop
        if (allTextElements.length > 0) {
          typeNextText();
        }
      }

      // Observe all Instagram items with typing content enabled
      const instagramItems = document.querySelectorAll('.instagram-item[data-typing-content="true"]');
      instagramItems.forEach(item => {
        typingObserver.observe(item);
      });

      // Cleanup function (optional)
      function cleanup() {
        typingObserver.disconnect();
      }
    })();
  </script>
{% endif %}

{%- if block.settings.enable_fancybox -%}
  <script>
    (function() {
      'use strict';

      // Check if Fancybox is loaded
      if (typeof Fancybox === 'undefined') {
        console.error('Fancybox library not loaded');
        return;
      }

      // Initialize Fancybox for Instagram gallery
      if (!window._fancyboxInitialized) {
        window._fancyboxInitialized = true;

        // Wait for DOM to be ready
        setTimeout(() => {
          const fancyboxElements = document.querySelectorAll('[data-fancybox]');

          // Initialize Fancybox with custom options
          Fancybox.bind('[data-fancybox]', {
            // Gallery options
            loop: true,
            buttons: [
              "zoom",
              "slideShow",
              "fullScreen",
              "thumbs",
              "close"
            ],
            // Animation settings
            animated: true,
            showClass: "fancybox-zoomIn",
            hideClass: "fancybox-zoomOut",
            // Thumbnails
            thumbs: {
              autoStart: false,
              axis: "x"
            },
            // Image options
            Image: {
              zoom: true,
              click: "close",
              wheel: "slide"
            },
            // Video options
            Video: {
              autoplay: false
            },
            // Error handling
            on: {
              done: (fancybox, slide) => {
                console.log('Fancybox opened:', slide.src);
              },
              error: (fancybox, slide) => {
                console.error('Fancybox error:', slide.src, slide.error);
              }
            }
          });
        }, 100); // Small delay to ensure DOM is ready
      }
    })();
  </script>
{%- endif -%}

{%- stylesheet -%}
  .image-block {
    display: flex;
    justify-content: var(--horizontal-alignment, 'inline-start');
  }

  .image-block--height-fill .image-block__image,
  .image-block--height-fill .video-block {
    height: 100%;
  }

  .image-block--height-fill .video-block img {
    height: 100%;
    object-fit: cover;
  }

  .image-block--height-fill .video-block video {
    height: 100%;
    object-fit: cover;
  }

  .image-block__image,
  .video-block {
    object-fit: cover;
    aspect-ratio: var(--ratio);
  }

  .icon_media {
    display: flex;
    fill: currentcolor;
    flex-shrink: 0;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 1;
    right: var(--icon-button-position-right);
    bottom: var(--icon-button-position-bottom);
  }
  .icon_media.position-left {
    right: unset;
    left: var(--icon-button-position-left);
  }

  .icon_media.icon_media--circle {
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--icon-button-bg-color);
    color: var(--icon-button-color);
    border-radius: var(--style-border-radius-50);
    width: var(--icon-button-size);
    height: var(--icon-button-size);
  }

  .icon_plus {
    font-size: 0px;
    width: 48px;
    height: 48px;
    position: absolute;
    z-index: 999;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    overflow: hidden;
    transform: translate(-50%, -50%) scale(.8) rotate(-45deg);
    transition: opacity .1s ease, transform .3s ease;
  }

  .icon_plus:before {
    position: absolute;
    content: "";
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #fff;
    width: 2px;
    height: 100%;
  }

  .icon_plus:after {
    position: absolute;
    content: "";
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #fff;
    width: 100%;
    height: 2px;
  }

  .instagram-item__image:hover .icon_plus {
    opacity: 1;
    overflow: visible;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1) rotate(0);
  }

  /* .image-overlay:before {
    content: "";
    width: 100%;
    height: 100%;
    top: 100%;
    right: 0;
    left: auto;
    z-index: 2;
    transform: none;
    position: absolute;
    transition: all .3s ease;
    background-color: rgba(0, 0, 0, .6);
    background: linear-gradient(to bottom, transparent 0, rgba(0, 0, 0, .6) 100%);
  }

  .instagram-item:hover .image-overlay:before {
    top: 0;
  } */

  .image-zoomIn img {
    transition: transform .64s ease;
  }

  .instagram-item__image:hover .image-zoomIn img {
    transform: scale(1.05);
    transition: transform .64s ease;
  }

  .instagram-item--bg-color {
    background-color: var(--background-color);
    width: 100%;
    height: 100%;
    aspect-ratio: var(--ratioBg);
  }

{%- endstylesheet -%}

{% schema %}
{
  "name": "Instagram item",
  "settings": [
    {
      "type": "header",
      "content": "Item Media"
    },
    {
      "type": "select",
      "id": "background_media",
      "label": "t:settings.background_media",
      "options": [
        {
          "value": "image",
          "label": "t:options.image"
        },
        {
          "value": "video",
          "label": "t:options.video"
        },
        {
          "value": "background_color",
          "label": "Background color"
        }
      ],
      "default": "image"
    },
    {
      "type": "video",
      "id": "video",
      "label": "t:settings.video",
      "visible_if": "{{ block.settings.background_media == 'video' }}"
    },
    {
      "type": "select",
      "id": "video_position",
      "label": "t:settings.video_position",
      "options": [
        {
          "value": "cover",
          "label": "t:options.cover"
        },
        {
          "value": "contain",
          "label": "t:options.contain"
        }
      ],
      "default": "cover",
      "visible_if": "{{ block.settings.background_media == 'video' }}"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "t:settings.image",
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "select",
      "id": "background_image_position",
      "label": "t:settings.image_position",
      "options": [
        {
          "value": "cover",
          "label": "t:options.cover"
        },
        {
          "value": "fit",
          "label": "t:options.fit"
        }
      ],
      "default": "cover",
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link",
      "visible_if": "{{ block.settings.enable_fancybox == false }}"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#00312d",
      "visible_if": "{{ block.settings.background_media == 'background_color' }}"
    },
    {
      "type": "checkbox",
      "id": "hide_on_mobile",
      "label": "t:settings.hide_on_mobile",
      "default": false
    },
    {
      "type": "checkbox",
      "label": "t:settings.enable_typing_content",
      "id": "enable_typing_content",
      "default": false
    },
    {
      "type": "header",
      "content": "Size"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:sections.main-collection-product-grid.settings.image_ratio.options__1.label"
        },
        {
          "value": "portrait",
          "label": "t:sections.main-collection-product-grid.settings.image_ratio.options__2.label"
        },
        {
          "value": "square",
          "label": "t:sections.main-collection-product-grid.settings.image_ratio.options__3.label"
        }
      ],
      "default": "adapt",
      "label": "t:sections.main-collection-product-grid.settings.image_ratio.label"
    },
    {
      "type": "select",
      "id": "width",
      "label": "t:settings.width_desktop",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "custom"
    },
    {
      "type": "range",
      "id": "custom_width",
      "label": "t:settings.custom_percent",
      "min": 1,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width == 'custom' }}"
    },
    {
      "type": "select",
      "id": "width_tablet",
      "label": "t:settings.width_tablet",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "custom"
    },
    {
      "type": "range",
      "id": "custom_width_tablet",
      "label": "t:settings.custom_percent",
      "min": 1,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width_tablet == 'custom' }}"
    },
    {
      "type": "select",
      "id": "width_mobile",
      "label": "t:settings.width_mobile",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "custom"
    },
    {
      "type": "range",
      "id": "custom_width_mobile",
      "label": "t:settings.custom_percent",
      "min": 1,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width_mobile == 'custom' }}"
    },
    {
      "type": "select",
      "id": "height",
      "label": "t:settings.height",
      "options": [
        {
          "value": "fit",
          "label": "t:options.fit_content"
        },
        {
          "value": "fill",
          "label": "t:options.fill"
        }
      ],
      "default": "fit",
      "visible_if": "{{ block.settings.image_ratio == 'adapt' }}"
    },
    {
      "type": "header",
      "content": "t:settings_schema.global.settings.header__border.content"
    },
    {
      "type": "select",
      "id": "border",
      "label": "t:settings.style",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "solid",
          "label": "Solid"
        }
      ],
      "default": "none"
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:settings_schema.global.settings.thickness.label",
      "default": 1,
      "visible_if": "{{ block.settings.border != 'none' }}"
    },
    {
      "type": "range",
      "id": "border_opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "t:settings_schema.global.settings.opacity.label",
      "default": 100,
      "visible_if": "{{ block.settings.border != 'none' }}"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "t:settings_schema.global.settings.corner_radius.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Icon"
    },
    {
      "type": "select",
      "id": "icon",
      "label": "t:settings.icon",
      "options": [
        {
          "value": "none",
          "label": "t:options.none"
        },
        {
          "value": "instagram-cart",
          "label": "t:options.instagram_cart"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "none"
    },
    {
      "type": "select",
      "id": "icon_custom",
      "label": "Custom icon",
      "visible_if": "{{ block.settings.icon == 'custom'}}",
      "options": [
        {
          "value": "svg",
          "label": "SVG"
        },
        {
          "value": "image",
          "label": "t:options.image"  
        }
      ],
      "default": "svg"
    },
    {
      "type": "liquid",
      "id": "svg_upload",
      "label": "SVG icon",
      "info": "Go to this link [find your icon](https:\/\/fontawesome.com\/v5\/search). Find the icon you want, then copy the SVG code and paste it here.",
      "visible_if": "{{ block.settings.icon_custom == 'svg' }}"
    },
    {
      "type": "image_picker",
      "id": "image_upload",
      "label": "t:settings.image_icon",
      "visible_if": "{{ block.settings.icon_custom == 'image' }}"
    },
    {
      "type": "range",
      "id": "icon_width",
      "label": "t:settings.width",
      "min": 12,
      "max": 200,
      "step": 2,
      "unit": "px",
      "default": 40,
      "visible_if": "{{ block.settings.icon_custom != 'svg' }}"
    },
    {
      "type": "url",
      "id": "icon_link",
      "label": "t:settings.link",
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "checkbox",
      "id": "icon_open_in_new_tab",
      "label": "t:settings.open_new_tab",
      "default": false,
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "color",
      "id": "icon_button_bg_color",
      "label": "Icon button background color",
      "default": "#ffffff",
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "color",
      "id": "icon_button_color",
      "label": "Icon button color",
      "default": "#232323",
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "range",
      "id": "icon_button_size",
      "label": "Icon button size",
      "min": 20,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 40,
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "select",
      "id": "icon_button_position",
      "label": "Icon button position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "right",
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "range",
      "id": "icon_button_position_right",
      "label": "Icon button position right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 20,
      "visible_if": "{{ block.settings.background_media == 'image' and block.settings.icon_button_position == 'right' }}"
    },
    {
      "type": "range",
      "id": "icon_button_position_left",
      "label": "Icon button position left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 20,
      "visible_if": "{{ block.settings.background_media == 'image' and block.settings.icon_button_position == 'left' }}"
    },
    {
      "type": "range",
      "id": "icon_button_position_bottom",
      "label": "Icon button position bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 20,
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "header",
      "content": "Hover"
    },
    {
      "type": "checkbox",
      "label": "t:settings.hover_zoom",  
      "id": "hover_zoomIn",
      "default": true
    },
    {
      "type": "checkbox",
      "label": "t:settings.hover_plus_icon",
      "id": "hover_plus_icon",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "toggle_overlay",
      "label": "t:settings.hover_overlay",
      "default": true
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "t:settings.overlay_color",
      "alpha": true,
      "default": "#0000004D",
      "visible_if": "{{ block.settings.toggle_overlay }}"
    },
    {
      "type": "select",
      "id": "overlay_style",
      "label": "t:settings.overlay_style",
      "options": [
        {
          "value": "solid",
          "label": "t:options.solid"
        },
        {
          "value": "gradient",
          "label": "t:options.gradient"
        }
      ],
      "default": "solid",
      "visible_if": "{{ block.settings.toggle_overlay }}"
    },
    {
      "type": "select",
      "id": "gradient_direction",
      "label": "t:settings.gradient_direction",
      "options": [
        {
          "value": "to top",
          "label": "t:options.up"
        },
        {
          "value": "to bottom",
          "label": "t:options.down"
        }
      ],
      "default": "to top",
      "visible_if": "{{ block.settings.toggle_overlay and block.settings.overlay_style == 'gradient' }}"
    },
    {
      "type": "checkbox",
      "label": "t:settings.center_button",
      "id": "center_button",
      "default": false,
      "info": "Button will be centered on the image when hover",
      "visible_if": "{{ block.settings.background_media == 'image' }}"
    },
    {
      "type": "text",
      "id": "center_button_text",
      "label": "t:settings.button_label",
      "default": "Shop now",
      "visible_if": "{{ block.settings.center_button == true }}"
    },
    {
      "type": "url",
      "id": "center_button_link",
      "label": "t:settings.button_link",
      "visible_if": "{{ block.settings.center_button == true }}"
    },
    {
      "type": "select",
      "id": "style_class",
      "label": "t:settings.style",
      "options": [
        {
          "value": "button",
          "label": "t:options.primary"
        },
        {
          "value": "button-secondary",
          "label": "t:options.secondary"
        },
        {
          "value": "link",
          "label": "t:options.link"
        }
      ],
      "default": "button"
    },
    {
      "type": "select",
      "id": "case",
      "label": "t:settings.case",
      "options": [
        {
          "value": "none",
          "label": "t:options.default"
        },
        {
          "value": "uppercase",
          "label": "t:options.uppercase"
        },
        {
          "value": "capitalize",
          "label": "t:options.capitalize"
        }
      ],
      "default": "none",
      "visible_if": "{{ block.settings.style_class == 'link' }}"
    },
    {
      "type": "checkbox",
      "id": "link_underline",
      "label": "t:options.underline",
      "default": false,
      "visible_if": "{{ block.settings.style_class == 'link' }}"
    },
    {
      "type": "header",
      "content": "Animation"
    },
    {
      "type": "checkbox",
      "id": "enable_fancybox",
      "label": "t:settings.enable_lightbox",  
      "default": true,
      "info": "Opens images and videos in a beautiful lightbox gallery",
      "visible_if": "{{ block.settings.enable_parallax == false }}"
    },
    {
      "type": "checkbox",
      "id": "enable_parallax",
      "label": "t:settings.enable_parallax_scroll",
      "default": false,
      "visible_if": "{{ block.settings.enable_fancybox == false }}"
    },
    {
      "type": "range",
      "id": "parallax_speed",
      "label": "t:settings.parallax_speed",
      "min": 0,
      "max": 4,
      "step": 0.5,
      "default": 0.5,
      "visible_if": "{{ block.settings.enable_fancybox == false and block.settings.enable_parallax }}"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0,
      "label": "t:settings_schema.global.settings.spacing.spacing_top.label"
    },
    {
      "type": "range",
      "id": "padding_right",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0,
      "label": "t:settings_schema.global.settings.spacing.spacing_right.label"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0,
      "label": "t:settings_schema.global.settings.spacing.spacing_bottom.label"
    },
    {
      "type": "range",
      "id": "padding_left",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0,
      "label": "t:settings_schema.global.settings.spacing.spacing_left.label"
    }
  ],
  "blocks": [
    {
      "type": "_divider"
    },
    {
      "type": "group"
    },
    {
      "type": "image"
    },
    {
      "type": "text"
    },
    {
      "type": "button"
    },
    {
      "type": "_content-hover"
    }
  ],
  "presets": [
    {
      "name": "Instagram item"
    }
  ]
}
{% endschema %}