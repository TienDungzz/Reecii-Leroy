{% liquid
  assign content_alignment = block.settings.content_alignment
  assign content_type = block.settings.content_type
  assign show_content_on_img = block.settings.show_content_on_img
  assign content_position_top = block.settings.content_position_top
  assign content_position_right = block.settings.content_position_right
  assign content_position_bottom = block.settings.content_position_bottom
  assign content_position_left = block.settings.content_position_left

  assign animation_type = block.settings.animation_type
%}

{% capture attr %}
style="
{% if content_position_top != 0 %}--posTop: {{ content_position_top }}px; {% endif %}
{% if content_position_right != 0 %}--posRight: {{ content_position_right }}px; {% endif %}
{% if content_position_bottom != 0 %}--posBottom: {{ content_position_bottom }}px; {% endif %}
{% if content_position_left != 0 %}--posLeft: {{ content_position_left }}px; {% endif %}
"
{% endcapture %}

{% capture class %}
  text-{{ content_alignment }} {% if content_type == 'absolute-c-x' %} top-0 {% endif %}{% if show_content_on_img != blank %} {{ content_type }}{% endif %} {% if animation_type != 'none' %} animate--{{ animation_type }}{% endif %}
{% endcapture %}

<div class="hover-content-block {{ class }}" {{ attr }}>
  {% content_for 'blocks' %}
</div>

{% stylesheet %}
  .hover-content-block {
    z-index: 999;
  }

  .hover-content-block.custom {
    position: absolute;
    top: var(--posTop, unset);
    right: var(--posRight, unset);
    bottom: var(--posBottom, unset);
    left: var(--posLeft, unset);
    transform: none;
  }

  /* Animation */
  .hover-content-block > * {
    opacity: var(--opacity-0);
    transition: all var(--animation-speed-slowest) var(--ease-out-cubic);
  }
  .instagram-item:has(.hover-content-block):hover .hover-content-block > * {
    opacity: var(--opacity-100);
  }

  .hover-content-block.animate--slide-in > * {
    transform: translateY(100%);
  }

  .instagram-item:has(.hover-content-block):hover .animate--slide-in > * {
    transform: translateY(0);
  }

  .hover-content-block.animate--reveal > * {
    clip-path: inset(0 100% 0 0);
    transition: clip-path 0.8s ease;
  }
  .instagram-item:has(.hover-content-block):hover .animate--reveal > * {
    clip-path: inset(0 0 0 0);
  }
{% endstylesheet %}

{% schema %}
  {
    "name": "Content hover",
    "blocks": [
      {
      "type": "group"
      },
      {
        "type": "image"
      },
      {
        "type": "text"
      },
      {
        "type": "button"
      },
      {
        "type": "icon"
      }
    ],
    "settings": [
      {
        "type": "header",
        "content": "Animation"
      },
      {
        "type": "select",
        "id": "animation_type",
        "label": "t:settings.animation_type",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "slide-in",
            "label": "Slide in"
          },
          {
            "value": "reveal",
            "label": "Reveal"
          }
        ],
        "default": "reveal"
      },
      {
        "type": "header",
        "content": "Content"
      },
      {
        "type": "select",
        "id": "content_alignment",
        "label": "Content alignment",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "center",
            "label": "Center"
          },
          {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "center"
      },
      {
        "type": "checkbox",
        "label": "Show content on image",
        "id": "show_content_on_img",
        "default": true
      },
      {
        "type": "select",
        "id": "content_type",
        "label": "t:settings.content_type",
        "options": [
          {
            "value": "absolute-c-c",
            "label": "t:options.center_center"
          },
          {
            "value": "absolute-c-x",
            "label": "t:options.center_horizontal"
          },
          {
            "value": "absolute-c-y",
            "label": "t:options.center_vertical"
          },
          {
            "value": "custom",
            "label": "t:options.custom"
          }
        ],
        "default": "absolute-c-c",
        "visible_if": "{{ block.settings.show_content_on_img }}"
      },
      {
        "type": "range",
        "id": "content_position_top",
        "label": "Top",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "default": 0,
        "visible_if": "{{ block.settings.content_type == 'custom' }}"
      },
      {
        "type": "range",
        "id": "content_position_left",
        "label": "Left",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "default": 20,
        "visible_if": "{{ block.settings.content_type == 'custom' }}"
      },
      {
        "type": "range",
        "id": "content_position_right",
        "label": "Right",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "default": 0,
        "visible_if": "{{ block.settings.content_type == 'custom' }}"
      },
      {
        "type": "range",
        "id": "content_position_bottom",
        "label": "t:settings.bottom",  
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "default": 20,
        "visible_if": "{{ block.settings.content_type == 'custom' }}"
      }
    ],
    "presets": [
      {
        "name": "Content hover"
      }
    ]
  }
{% endschema %}