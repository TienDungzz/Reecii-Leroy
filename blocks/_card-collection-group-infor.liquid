{% liquid
	assign collection = closest.collection
-%}

{% stylesheet %}
	.group-collection-information {
		position: absolute;
		inset: 0;
		width: auto;
		height: auto;
	}

	.group-collection-information__content {
		width: 100%;
	}

	.group-collection-information__content > * {
		height: auto;
	}

	[id*="collection-infor-icon"] {
		justify-content: center;
	}

	.group-collection-information__content .icon-block {
		width: 100%;

		& svg {
			fill: var(--button-color);
			width: 20px;
			height: 20px;
		}
	}

	.group-collection-information__content .icon-block .button-secondary{
		pointer-events: auto;
		padding: 10px;
	}

	.collection-card__image .group-collection-information__content > *:not(.button) {
		opacity: 0;
		-moz-transform: rotateX(90deg);
		-o-transform: rotateX(90deg);
		-ms-transform: rotateX(90deg);
		-webkit-transform: rotateX(90deg);
		transform: rotateX(90deg);
		-webkit-transition: transform .3s linear .1s;
		-moz-transition: transform .3s linear .1s;
		-ms-transition: transform .3s linear .1s;
		-o-transition: transform .3s linear .1s;
		transition: transform .3s linear .1s;
	}

	.collection-card:hover .collection-card__image .group-collection-information__content > *:not(.button) {
		opacity: 1;
		-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(opacity=100)";
		filter: alpha(opacity=100);
		-moz-transform: rotateX(0deg);
		-o-transform: rotateX(0deg);
		-ms-transform: rotateX(0deg);
		-webkit-transform: rotateX(0deg);
		transform: rotateX(0);
	}

	.collection-card__image .overlay{
		opacity: 0;
		-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(opacity=0)";
		filter: alpha(opacity=0);
		-webkit-transition: opacity .5s ease;
		-moz-transition: opacity .5s ease;
		-ms-transition: opacity .5s ease;
		-o-transition: opacity .5s ease;
		transition: opacity .5s ease;
	}

	.collection-card:hover .collection-card__image .overlay{
		opacity: 1;
		-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(opacity=100)";
		filter: alpha(opacity=100);
	}

{% endstylesheet %}

{% capture children %}
	<div
		class="
			group-collection-information__content
			layout-panel-flex
			layout-panel-flex--{{ block.settings.content_direction | default: 'column' }}
      mobile-{{ block.settings.content_direction_mobile | default: 'column' }}
		"
		style="{% render 'layout-panel-style', settings: block.settings, scale_min: 8 %}"
	>
		{% content_for 'block', type: '_collection-product-count', id: 'collection-infor-product-count', closest.collection: collection %}
		{% content_for 'block', type: 'icon', id: 'collection-infor-icon', closest.collection: collection %}
		{% content_for 'block', type: '_collection-button', id: 'collection-infor-button', closest.collection: collection %}
	</div>
{% endcapture %}

{% render 'group', class: 'group-collection-information', children: children, settings: block.settings, shopify_attributes: block.shopify_attributes %}

{% schema %}
{
	"name": "Group: Collection infor",
	"tag": null,
	"settings": [
		{
			"type": "header",
			"content": "t:content.layout"
		},
		{
			"type": "select",
			"id": "content_direction",
			"label": "t:settings.direction",
			"options": [
				{
					"value": "column",
					"label": "t:options.vertical"
				},
				{
					"value": "row",
					"label": "t:options.horizontal"
				}
			],
			"default": "column"
		},
    {
      "type": "select",
      "id": "content_direction_mobile",
      "label": "t:settings.direction_on_mobile",
      "options": [
        {
          "value": "column",
          "label": "t:options.vertical"
        },
        {
          "value": "row",
          "label": "t:options.horizontal"
        }
      ],
      "default": "column"
    },
		{
			"type": "select",
			"id": "horizontal_alignment",
			"label": "t:settings.alignment",
			"options": [
				{
					"value": "flex-start",
					"label": "t:options.left"
				},
				{
					"value": "center",
					"label": "t:options.center"
				},
				{
					"value": "flex-end",
					"label": "t:options.right"
				},
				{
					"value": "space-between",
					"label": "t:options.space_between"
				}
			],
			"default": "flex-start",
			"visible_if": "{{ block.settings.content_direction == 'row' }}"
		},
		{
			"type": "select",
			"id": "vertical_alignment",
			"label": "t:settings.position",
			"options": [
				{
					"value": "stretch",
					"label": "t:options.stretch"
				},
				{
					"value": "flex-start",
					"label": "t:options.top"
				},
				{
					"value": "center",
					"label": "t:options.center"
				},
				{
					"value": "flex-end",
					"label": "t:options.bottom"
				}
			],
			"default": "center",
			"visible_if": "{{ block.settings.content_direction == 'row' }}"
		},
		{
			"type": "checkbox",
			"id": "align_baseline",
			"label": "t:settings.align_baseline",
			"default": false,
			"visible_if": "{{ block.settings.vertical_alignment == 'flex-end' }}"
		},
		{
			"type": "select",
			"id": "horizontal_alignment_flex_direction_column",
			"label": "t:settings.alignment",
			"options": [
				{
					"value": "flex-start",
					"label": "t:options.left"
				},
				{
					"value": "center",
					"label": "t:options.center"
				},
				{
					"value": "flex-end",
					"label": "t:options.right"
				}
			],
			"default": "flex-start",
			"visible_if": "{{ block.settings.content_direction != 'row' }}"
		},
		{
			"type": "select",
			"id": "vertical_alignment_flex_direction_column",
			"label": "t:settings.position",
			"options": [
				{
					"value": "flex-start",
					"label": "t:options.top"
				},
				{
					"value": "center",
					"label": "t:options.center"
				},
				{
					"value": "flex-end",
					"label": "t:options.bottom"
				},
				{
					"value": "space-between",
					"label": "t:options.space_between"
				}
			],
			"default": "space-between",
			"visible_if": "{{ block.settings.content_direction == 'column' }}"
		},
		{
			"type": "header",
			"content": "t:content.appearance"
		},
		{
			"type": "checkbox",
			"id": "toggle_overlay",
			"label": "t:settings.background_overlay"
		},
		{
			"type": "color",
			"id": "overlay_color",
			"label": "t:settings.overlay_color",
			"alpha": true,
			"default": "#00000026",
			"visible_if": "{{ block.settings.toggle_overlay }}"
		},
		{
			"type": "checkbox",
			"id": "extend_left_overlay",
			"label": "t:settings.extend_left_overlay",
			"default": false,
			"visible_if": "{{ block.settings.toggle_overlay }}"
		},
		{
			"type": "checkbox",
			"id": "extend_right_overlay",
			"label": "t:settings.extend_right_overlay",
			"default": false,
			"visible_if": "{{ block.settings.toggle_overlay }}"
		},
		{
			"type": "select",
			"id": "overlay_style",
			"label": "t:settings.overlay_style",
			"options": [
				{
					"value": "solid",
					"label": "t:options.solid"
				},
				{
					"value": "gradient",
					"label": "t:options.gradient"
				}
			],
			"default": "solid",
			"visible_if": "{{ block.settings.toggle_overlay }}"
		},
		{
			"type": "select",
			"id": "gradient_direction",
			"label": "t:settings.gradient_direction",
			"options": [
				{
					"value": "to top",
					"label": "t:options.up"
				},
				{
					"value": "to bottom",
					"label": "t:options.down"
				}
			],
			"default": "to top",
			"visible_if": "{{ block.settings.toggle_overlay and block.settings.overlay_style == 'gradient' }}"
		},
		{
			"type": "header",
			"content": "t:content.margin"
		},
		{
			"type": "range",
			"id": "margin-block-start",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"label": "t:sections.all.margin.margin_top",
			"default": 0
		},
		{
			"type": "range",
			"id": "margin-block-start-mobile",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"label": "t:settings.top_margin_mobile",
			"default": 0
		},
		{
			"type": "range",
			"id": "margin-block-end",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"label": "t:sections.all.margin.margin_bottom",
			"default": 0
		},
		{
			"type": "range",
			"id": "margin-block-end-mobile",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"label": "t:settings.bottom_margin_mobile",
			"default": 0
		},
		{
			"type": "range",
			"id": "margin-inline-start",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"label":"t:sections.all.margin.margin_left",
			"default": 0
		},
		{
			"type": "range",
			"id": "margin-inline-start-mobile",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"label":"Left margin mobile",
			"default": 0
		},
		{
			"type": "range",
			"id": "margin-inline-end",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"label": "t:sections.all.margin.margin_right",
			"default": 0
		},
		{
			"type": "range",
			"id": "margin-inline-end-mobile",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"label": "t:settings.top_margin_mobile",
			"default": 0
		},
		{
			"type": "header",
			"content": "t:content.padding"
		},
		{
			"type": "range",
			"id": "padding-block-start",
			"label": "t:settings.top",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"default": 0
		},
		{
			"type": "range",
			"id": "padding-block-end",
			"label": "t:settings.bottom",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"default": 0
		},
		{
			"type": "range",
			"id": "padding-inline-start",
			"label": "t:settings.left",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"default": 0
		},
		{
			"type": "range",
			"id": "padding-inline-end",
			"label": "t:settings.right",
			"min": 0,
			"max": 100,
			"step": 1,
			"unit": "px",
			"default": 0
		}
	],
	"presets": [
		{
			"name": "Group: Collection infor"
		}
	]
}
{% endschema %}
