{%- liquid
    assign section_id = section.id
    assign card_product = block.settings.product
    assign enable_quick_view = settings.enable_quick_view
    assign enable_wishlist = settings.enable_wishlist
    assign enable_compare = settings.enable_compare

    if settings.quick_add_type == 'icon' and block.blocks.size > 0
        assign quick_add_is_icon = true
        assign class_group = 'md:absolute top-0 right-0 z-2'
        assign class_group_inner = 'max-sm:absolute top-0 right-0 z-2'
    elsif settings.quick_add_type == 'text' or settings.quick_add_type == 'icon' and block.blocks.size == 0
        assign quick_add_hidden = true
        assign class_group = 'absolute top-0 right-0 z-2'
    endif
-%}

{%- if card_product and card_product != empty -%}
    <div class="card-product__group-wrapper{% if quick_add_is_icon %} {{ class_group }} quick-add-type-icon{% endif %}">
        <div class="card--block-group card-product__group flex flex-column{% if quick_add_hidden %} {{ class_group }}{% endif %}{% if quick_add_is_icon %} {{ class_group_inner }}{% endif %}" style="--gap-y: 1rem; --p: .5rem; --pb: 1rem; --md-p: 1rem; --md-pb: 1rem; --lg-p: 1.6rem; --lg-pb: 1rem;">
            {%- assign class_button = 'card-product__group-btn rounded-full bor-none center cursor-pointer flex items-center justify-center relative leading-none' -%}
            {%- assign class_text = 'text whitespace-nowrap overflow-hidden pointer-events-none absolute-c-y z--1 opacity-0' -%}
            {%- assign class_text_inner = 'text-inner text-sm inline-block' -%}

            {% comment %} ------ Wishlist ------ {% endcomment %}
            {%- if enable_wishlist -%}
                {% render 'product-wishlist-button', card_product: card_product, class_button: class_button, class_text: class_text, class_text_inner: class_text_inner %}

            {%- endif -%}

            {% comment %} ------ Quick view ------ {% endcomment %}
             {%- if enable_quick_view -%}
                {% render 'quick-view-button', card_product: card_product, class_button: class_button, class_text: class_text, class_text_inner: class_text_inner %}
             {%- endif -%}

            {% comment %} ------ Compare ------ {% endcomment %}
             {%- if enable_compare -%}
                 {% render 'product-compare-button', card_product: card_product, class_button: class_button, sectionId: section_id, class_text: class_text, class_text_inner: class_text_inner %}
             {%- endif -%}
        </div>

        {% comment %} ------ Quick add ------ {% endcomment %}
        {% content_for 'blocks' %}
    </div>
{%- endif -%}

{% schema %}
    {
        "name": "Group: Product buttons",
        "tag": null,
        "blocks": [{ "type": "_card-product-button-flex" }],
        "settings": [
            {
                "type": "product",
                "id": "product",
                "label": "t:sections.collage.blocks.product.settings.product.label"
            },
        ],
        "presets": [
            {
                "name": "Group: Product buttons",
                "settings": {
                    "product": "{{ closest.product }}"
                }
            }
        ]
    }
{% endschema %}