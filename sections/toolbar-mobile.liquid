{% comment %} {{ 'toolbar-mobile.css' | asset_url | stylesheet_tag: preload: true }} {% endcomment %}
<link rel="preload" href="{{ 'toolbar-mobile.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<toolbar-mobile
  class="toolbar-mobile toolbar-mobile-col--{{ section.blocks.size }} element-spacing-all fixed left-0 right-0 bottom-0 w-full flex z-2 color-{{ section.settings.color_scheme }} gradient lg:none no-js-hidden"
  style="
    --padding-top: {{ section.settings.padding_top }}px;
    --padding-bottom: {{ section.settings.padding_bottom }}px;
    --icon-size: {{ section.settings.icon_size }}px;
  "
>
  {%- capture class_toolbar_item -%}
    toolbar__item flex-grow shrink-0 flex justify-center items-center p-0 decoration-none color-foreground after-none
  {%- endcapture -%}

  {%- capture class_button -%}
    t-button flex justify-center items-center flex-column bor-none cursor-pointer p-0 color-foreground bg-transparent focus-inset no-js-hidden decoration-none link h-full
  {%- endcapture -%}

  {%- capture class_item_tag_a -%}
    toolbar__item flex-column shrink-0 flex justify-center items-center p-0 decoration-none color-foreground after-none
  {%- endcapture -%}

  {%- capture class_count_bubble -%}
    leading-none absolute rounded-full flex justify-center items-center
  {%- endcapture -%}

  {%- for block in section.blocks -%}
    {%- case block.type -%}
      {%- when 'search' -%}
        {%- if block.settings.action_type == 'drawer' -%}
          <side-drawer-opener
            class="{{ class_toolbar_item }}"
            data-side-drawer="#Drawer-Search"
          >
            <button
              class="{{ class_button }}"
              type="button"
              aria-haspopup="dialog"
              aria-label="{{ 'content.search' | t }}"
            >
              <span class="svg-wrapper">
                {%- if block.settings.icon != blank -%}
                  {{ block.settings.icon }}
                {%- else -%}
                  {{ 'icon-search.svg' | inline_asset_content }}
                {%- endif -%}
              </span>
              {%- if block.settings.title != blank -%}
                <span class="text">{{ block.settings.title | escape }}</span>
              {%- endif -%}
            </button>
          </side-drawer-opener>
        {%- else -%}
          <a
            href="{{ routes.search_url }}"
            class="{{ class_item_tag_a }}"
            aria-label="{{ block.settings.title | escape }}"
          >
            <span class="svg-wrapper">
              {%- if block.settings.icon != blank -%}
                {{ block.settings.icon }}
              {%- else -%}
                {{ 'icon-search.svg' | inline_asset_content }}
              {%- endif -%}
            </span>
            {%- if block.settings.title != blank -%}
              <span class="text">{{ block.settings.title | escape }}</span>
            {%- endif -%}
          </a>
        {%- endif -%}
      {%- when 'account' -%}
        {%- if block.settings.action_type == 'drawer' -%}
          <side-drawer-opener
            class="{{ class_toolbar_item }}"
            data-side-drawer="#Drawer-Account"
          >
            <button
              class="{{ class_button }}"
              type="button"
              aria-haspopup="dialog"
              aria-label="{% if customer %}{{ 'customer.account_fallback' | t }}{% else %}{{ 'customer.log_in' | t }}{% endif %}"
            >
              <span class="svg-wrapper">
                {%- if block.settings.icon != blank -%}
                  {{ block.settings.icon }}
                {%- else -%}
                  {{ 'icon-account.svg' | inline_asset_content }}
                {%- endif -%}
              </span>
              {%- if block.settings.title != blank -%}
                <span class="text">{{ block.settings.title | escape }}</span>
              {%- endif -%}
            </button>
          </side-drawer-opener>
        {%- else -%}
          <a
            href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}"
            class="{{ class_item_tag_a }}"
            aria-label="{{ block.settings.title | escape }}"
          >
            <span class="svg-wrapper">
              {%- if block.settings.icon != blank -%}
                {{ block.settings.icon }}
              {%- else -%}
                {{ 'icon-account.svg' | inline_asset_content }}
              {%- endif -%}
            </span>
            {%- if block.settings.title != blank -%}
              <span class="text">{{ block.settings.title | escape }}</span>
            {%- endif -%}
            <span class="visually-hidden">
              {%- liquid
                if customer
                  echo 'customer.account_fallback' | t
                else
                  echo 'customer.log_in' | t
                endif
              -%}
            </span>
          </a>
        {%- endif -%}
      {%- when 'cart' -%}
        {%- if block.settings.action_type == 'drawer' -%}
          <side-drawer-opener
            class="{{ class_toolbar_item }}"
            data-side-drawer="#Cart-Drawer"
          >
            <button
              class="{{ class_button }} relative"
              type="button"
              aria-haspopup="dialog"
              aria-label="{{ 'content.cart.cart_items' | t: count: cart.item_count }}"
            >
              <div class="count-bubble relative">
                <span class="svg-wrapper">
                  {%- if block.settings.icon != blank -%}
                    {{ block.settings.icon }}
                  {%- else -%}
                    {{ 'icon-cart_2.svg' | inline_asset_content }}
                  {%- endif -%}
                </span>
                {%- if cart.item_count < 100 -%}
                  <div class="{{ class_count_bubble }} cart-count-bubble cart-icon-bubble">
                    <span aria-hidden="true">{{ cart.item_count }}</span>
                    <span class="visually-hidden">{{ 'content.cart_count' | t: count: cart.item_count }}</span>
                  </div>
                {%- endif -%}
              </div>
              {%- if block.settings.title != blank -%}
                <span class="text">{{ block.settings.title | escape }}</span>
              {%- endif -%}
            </button>
          </side-drawer-opener>
        {%- else -%}
          <a
            href="{{ routes.cart_url }}"
            class="{{ class_item_tag_a }}"
          >
            <div class="count-bubble relative" style="line-height: 0;">
              <span class="svg-wrapper">
                {%- if block.settings.icon != blank -%}
                  {{ block.settings.icon }}
                {%- else -%}
                  {{ 'icon-cart_2.svg' | inline_asset_content }}
                {%- endif -%}
              </span>
              {%- if cart.item_count < 100 -%}
                <div class="{{ class_count_bubble }} cart-count-bubble cart-icon-bubble">
                  <span aria-hidden="true">{{ cart.item_count }}</span>
                  <span class="visually-hidden">{{ 'content.cart_count' | t: count: cart.item_count }}</span>
                </div>
              {%- endif -%}
            </div>
            {%- if block.settings.title != blank -%}
              <span class="text">{{ block.settings.title | escape }}</span>
            {%- endif -%}
          </a>
        {%- endif -%}
      {%- when 'wishlist' -%}
        <side-drawer-opener
          class="{{ class_toolbar_item }}"
          data-side-drawer="#Drawer-Wishlist"
        >
          <button
            class="{{ class_button }} relative"
            type="button"
            aria-haspopup="dialog"
            aria-label="{{ 'content.wishlist_items' | t: count: cart.item_count }}"
          >
            <div class="count-bubble relative">
              <span class="svg-wrapper">
                {%- if block.settings.icon != blank -%}
                  {{ block.settings.icon }}
                {%- else -%}
                  {{ 'icon-heart.svg' | inline_asset_content }}
                {%- endif -%}
              </span>
              <div class="{{ class_count_bubble }} wishlist-count-bubble">
                <span class="number" aria-hidden="true">0</span>
                <span class="visually-hidden" data-text="{{ 'content.items' | t }}"
                  >0 {{ 'content.items' | t -}}
                </span>
              </div>
            </div>
            {%- if block.settings.title != blank -%}
              <span class="text">{{ block.settings.title | escape }}</span>
            {%- endif -%}
          </button>
        </side-drawer-opener>
      {%- when 'link' -%}
        <a
          {% if block.settings.link == blank %}
            role="link" aria-disabled="true"
          {% else %}
            href="{{ block.settings.link }}"
          {% endif %}
          class="toolbar__item flex-grow shrink-0 flex justify-center items-center flex-column center decoration-none link linkfulltext"
          aria-label="{{ block.settings.title | escape }}"
        >
          <span class="svg-wrapper">
            {%- if block.settings.icon != blank -%}
              {{ block.settings.icon }}
            {%- else -%}
              {{ 'icon-collection.svg' | inline_asset_content }}
            {%- endif -%}
          </span>
          {%- if block.settings.title != blank -%}
            <span class="text">{{ block.settings.title | escape }}</span>
          {%- endif -%}
        </a>
    {%- endcase -%}
  {%- endfor -%}
</toolbar-mobile>

<script src="{{ 'toolbar-mobile.js' | asset_url }}" defer="defer"></script>

{% schema %}
{
  "name": "t:names.sticky_toolbar_mobile",
  "tag": "section",
  "class": "shopify-section--popup section--toolbar-mobile",
  "limit": 1,
  "enabled_on": {
    "groups": ["custom.popup"]
  },
  "settings": [
    {
      "type": "paragraph",
      "content": "t:content.sticky_toolbar_mobile_info"
    },
    {
      "type": "range",
      "id": "icon_size",
      "label": "t:settings.icon_size",
      "min": 10,
      "max": 25,
      "step": 1,
      "unit": "px",
      "default": 20
    },
    {
      "type": "header",
      "content": "t:content.colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "background-1"
    },
    {
      "type": "header",
      "content": "t:content.section_padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 15,
      "step": 1,
      "unit": "px",
      "label": "t:settings.top",
      "default": 4
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 15,
      "step": 1,
      "unit": "px",
      "label": "t:settings.bottom",
      "default": 4
    }
  ],
  "blocks": [
    {
      "type": "search",
      "name": "t:names.search",
      "limit": 1,
      "settings": [
        {
          "type": "textarea",
          "id": "icon",
          "label": "t:settings.svg_icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:settings.title",
          "default": "Search"
        },
        {
          "type": "select",
          "id": "action_type",
          "options": [
            {
              "value": "drawer",
              "label": "t:options.drawer"
            },
            {
              "value": "page",
              "label": "t:options.page"
            }
          ],
          "default": "drawer",
          "label": "t:settings.action_type"
        }
      ]
    },
    {
      "type": "account",
      "name": "t:names.account",
      "limit": 1,
      "settings": [
        {
          "type": "textarea",
          "id": "icon",
          "label": "t:settings.svg_icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:settings.title",
          "default": "Account"
        },
        {
          "type": "select",
          "id": "action_type",
          "options": [
            {
              "value": "drawer",
              "label": "t:options.drawer"
            },
            {
              "value": "page",
              "label": "t:options.page"
            }
          ],
          "default": "drawer",
          "label": "t:settings.action_type"
        }
      ]
    },
    {
      "type": "cart",
      "name": "t:names.cart",
      "limit": 1,
      "settings": [
        {
          "type": "textarea",
          "id": "icon",
          "label": "t:settings.svg_icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:settings.title",
          "default": "Cart"
        },
        {
          "type": "select",
          "id": "action_type",
          "options": [
            {
              "value": "drawer",
              "label": "t:options.drawer"
            },
            {
              "value": "page",
              "label": "t:options.page"
            }
          ],
          "default": "drawer",
          "label": "t:settings.action_type"
        }
      ]
    },
    {
      "type": "wishlist",
      "name": "t:names.wishlist",
      "limit": 1,
      "settings": [
        {
          "type": "textarea",
          "id": "icon",
          "label": "t:settings.svg_icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:settings.title",
          "default": "Wishlist"
        }
      ]
    },
    {
      "type": "link",
      "name": "t:names.link",
      "limit": 2,
      "settings": [
        {
          "type": "textarea",
          "id": "icon",
          "label": "t:settings.svg_icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:settings.title",
          "default": "Shop"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:settings.link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:names.sticky_toolbar_mobile",
      "blocks": [
        {
          "type": "search"
        },
        {
          "type": "account"
        },
        {
          "type": "link"
        },
        {
          "type": "cart"
        },
        {
          "type": "wishlist"
        }
      ]
    }
  ]
}
{% endschema %}
